<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Installing OMPL/MoveIt! for custom motion planning" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/" /><meta property="og:url" content="https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/" /><meta property="og:site_name" content="Jack Kawell" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-24T12:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Installing OMPL/MoveIt! for custom motion planning" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-19T13:52:03-05:00","datePublished":"2019-06-24T12:00:00-05:00","description":"Introduction","headline":"Installing OMPL/MoveIt! for custom motion planning","mainEntityOfPage":{"@type":"WebPage","@id":"https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/"},"url":"https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/"}</script><title>Installing OMPL/MoveIt! for custom motion planning | Jack Kawell</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jack Kawell"><meta name="application-name" content="Jack Kawell"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jack Kawell</a></div><div class="site-subtitle font-italic">I build stuff <a hidden rel="me" href="https://mastodon.world/@jgkawell">Mastodon</a></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-document ml-xl-3 mr-xl-3 unloaded"></i> <span>RESUME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jgkawell" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://mastodon.world/@jgkawell" aria-label="mastodon" target="_blank" rel="noopener"> <i class="fab fa-mastodon"></i> </a> <a href="https://www.linkedin.com/in/jack-kawell" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Installing OMPL/MoveIt! for custom motion planning</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Installing OMPL/MoveIt! for custom motion planning</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/jgkawell">Jack Kawell</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1561395600" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2019-06-24 </em> </span> <span> Updated <em class="timeago" data-ts="1655664723" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-06-19 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1708 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>I am in the process of creating a customized version of an OMPL planner that uses a personalized costmap to help robots learn to move around people in a more comfortable way. In order to do this, I needed a development environment that included ROS, OMPL, and MoveIt!. Specifically, I needed both OMPL and MoveIt! to be installed from source in order to augment their code so that I could add my customizations to OMPL and have MoveIt! use my custom planner within OMPL.</p><p>I naively thought at first that setting up this development environment would be easy. I found this handy tutorial on web.archive.org (the fact that it’s archived should have been a red flag to me) and attempted to follow its super basic instructions. Turns out that OMPL and MoveIt! have some dependencies that must be installed in a particular way in order for everything to install properly. Through a lot of hacking, installing, reinstalling, and much head-banging, I finally figured out an installation process that leads to (what seems to be) a fully functional development environment for OMPL and MoveIt!.</p><p>I have worked out a couple methods to getting this working:</p><ul><li>This is a simple shell script I wrote that installs everything you need on a clean Ubuntu system.<li><strong>(preferred)</strong> This method builds a container in Docker.</ul><p>NOTE #1: I am not an experienced C++ developer and so there may be inaccuracies in my explanation below and my methodology may be hacky/downright wrong. I welcome any and all comments to improve this system.</p><p>NOTE #2: If you want to develop in ROS but don’t necessarily need custom installs of OMPL or MoveIt! and also happen to use Windows, I’ve written up a couple tutorials showing how to get ROS working on Windows using either WSL <a href="/posts/ros-windows-wsl">here</a> or Docker <a href="/posts/ros-windows-docker">here</a>.</p><h2 id="installation-ubuntu-desktop"><span class="mr-2">Installation (Ubuntu Desktop)</span><a href="#installation-ubuntu-desktop" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Before we begin, a couple things to note. First, this process should work well on a relatively clean version of Ubuntu 16.04 desktop. I would suggest using a VM (or <a href="https://docs.microsoft.com/en-us/windows/wsl/about">WSL</a> first as it is guaranteed to be completely clean and so without any conflicting dependencies (the bane of my existence while figuring all this out).</p><p>Now, open a terminal window and download the install script from my GitHub:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wget https://raw.githubusercontent.com/jgkawell/docker-scripts/master/Linux/ompl-install.sh
</pre></table></code></div></div><p>NOTE: The contents of this file are explained in full below if you want to know what exactly it does.</p><p>You may need to make the file executable:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">chmod</span> +x ompl-dev-install.sh
</pre></table></code></div></div><p>And finally, simply run the script and wait a while (the length will depend on the speed of your machine and internet connection):</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./ompl-dev-install.sh
</pre></table></code></div></div><p>And that should be it! Keep reading below if you’d like a full explanation of the installation script though</p><h2 id="installation-docker"><span class="mr-2">Installation (Docker)</span><a href="#installation-docker" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>This method will set up everything you need for development within a Docker container. This is my preferred method as it is super repeatable and can easily be nuked and rebuilt without any hassle. It does require a tad bit more initial setup though.</p><h3 id="x-server-gui-forwarding"><span class="mr-2">X server (GUI forwarding)</span><a href="#x-server-gui-forwarding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Now before we get started, we need to first set up the X-server on the host in order to pipe through GUI applications (think <code class="language-plaintext highlighter-rouge">rqt_console</code>, <code class="language-plaintext highlighter-rouge">rviz</code>, etc.). This is done differently if you’re on a Windows or Linux host.</p><h4 id="windows-host"><span class="mr-2">Windows Host</span><a href="#windows-host" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>If you’re running Windows, I’d suggest installing <a href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a> and then I have a pre-built configuration file that you can simply run to have the X server ready to go (it’s under <code class="language-plaintext highlighter-rouge">docker-scripts/Windows</code> in <a href="https://github.com/jgkawell/docker-scripts">this git repository</a>.</p><p>In addition to installing and setting up your X-server application, you’ll also need to set the <code class="language-plaintext highlighter-rouge">DISPLAY</code> environment variable so that the Docker container knows where to push GUI applications. For that, if you’re on Windows, run the below command in Powershell and remember to fill in your correct IP address (IP can be found in Settings -&gt; Network &amp; Internet -&gt; Wi-Fi or Ethernet -&gt; Click on the connection -&gt; IPv4 address):</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="n">Environment</span><span class="p">]::</span><span class="n">SetEnvironmentVariable</span><span class="p">(</span><span class="s2">"DISPLAY"</span><span class="p">,</span><span class="w"> </span><span class="s2">"{MY_IP_ADDRESS}:0.0"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p>NOTE: This variable “unsets” itself for some reason if you change consoles or restart. You can check to see if this variable is still set by using the command <code class="language-plaintext highlighter-rouge">Get-ChildItem Env:</code>.</p><h4 id="linux-host"><span class="mr-2">Linux Host</span><a href="#linux-host" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>If you’re running a Linux host… <em>{coming soon}</em></p><h3 id="startup"><span class="mr-2">Startup</span><a href="#startup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Now that our X server is setup, <a href="https://docs.docker.com/v17.12/install/">install Docker</a> and then open a terminal/Powershell window and clone my git repository to get the necessary Docker files:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clone https://github.com/jgkawell/docker-scripts.git
</pre></table></code></div></div><p>Now move into the <code class="language-plaintext highlighter-rouge">ompl</code> directory within the repository:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cd </span>docker-scripts/ompl
</pre></table></code></div></div><p>And now we can run our favorite command to launch the system:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker-compose up
</pre></table></code></div></div><p>This will take a while to run, but at the end it will have built an image called <code class="language-plaintext highlighter-rouge">jgkawell/ompl-dev:basic</code> and brought up a container called <code class="language-plaintext highlighter-rouge">ompl-dev-basic</code>. You can then ssh into the container with the typical command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker <span class="nb">exec</span> <span class="nt">-it</span> ompl-dev-basic bash
</pre></table></code></div></div><p>And from there you should have everything you need good to go. The container has tmux built in for multi-pane support (you’ll notice there’s a tmux config file that is copied into the container and sets up some of the most commonly used features like mouse support) as well as GUI forwarding. Go ahead and run through some <a href="http://wiki.ros.org/ROS/Tutorials">ROS</a> and <a href="http://docs.ros.org/kinetic/api/moveit_tutorials/html/index.html">MoveIt!</a> tutorials to check things out and happy hacking!</p><h2 id="installation-shell-script-overview"><span class="mr-2">Installation (shell script overview)</span><a href="#installation-shell-script-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Here is the installation script in full. The <code class="language-plaintext highlighter-rouge">Dockerfile</code> and <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> are very similar to the below code so if you’re wondering how those work you can look here for answers. Note that the sequence of installation is very important as each install requires one or more of the previous libraries to either install or function properly.</p><h4 id="install-misc-needed-packages"><span class="mr-2">Install misc needed packages</span><a href="#install-misc-needed-packages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c"># Install misc needed packages</span>
<span class="nb">sudo </span>apt <span class="nt">-y</span> update
<span class="nb">sudo </span>apt <span class="nt">-y</span> upgrade
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install </span>git build-essential cmake wget
</pre></table></code></div></div><p>This section just installs some basic packages we’ll need for the installation of everything below.</p><p>NOTE: In a previous version of this post I had custom installations of <code class="language-plaintext highlighter-rouge">libccd</code>, <code class="language-plaintext highlighter-rouge">fcl</code>, and <code class="language-plaintext highlighter-rouge">octomap</code>. Turns out these are unnecessary as MoveIt! will install the needed versions for our source OMPL install.</p><h4 id="install-ros"><span class="mr-2">Install ROS</span><a href="#install-ros" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># Install ROS (https://ros.org/install):</span>
<span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'echo "deb http://packages.ros.org/ros/ubuntu xenial main" &gt; /etc/apt/sources.list.d/ros-latest.list'</span>
<span class="nb">sudo </span>apt-key adv <span class="nt">--keyserver</span> <span class="s1">'hkp://keyserver.ubuntu.com:80'</span> <span class="nt">--recv-key</span> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
<span class="nb">sudo </span>apt <span class="nt">-y</span> update
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install </span>ros-kinetic-desktop
<span class="nb">sudo </span>rosdep init <span class="o">&amp;&amp;</span> rosdep update
<span class="nb">echo</span> <span class="s2">"source /opt/ros/kinetic/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install </span>python-rosinstall python-rosinstall-generator python-wstool
</pre></table></code></div></div><p>Anyone familiar with ROS will recognize these steps. One little change I took was to replace the <code class="language-plaintext highlighter-rouge">lsb_release</code> call with simply defining our version as <code class="language-plaintext highlighter-rouge">xenial</code>. The reason being that I didn’t want to install the <code class="language-plaintext highlighter-rouge">lsb-release</code> package and this script is only designed to work with 16.04/Kinetic anyway. Also you’ll notice that I install the <code class="language-plaintext highlighter-rouge">desktop</code> version of ROS and <strong>not</strong> <code class="language-plaintext highlighter-rouge">desktop-full</code>. This means that MoveIt! won’t be installed as a package and we can install it hassle free from source below. Also, MoveIt! will install all the needed GUI tools for robot simulation so installing them with <code class="language-plaintext highlighter-rouge">desktop-full</code> is unnecessary.</p><h4 id="install-moveit"><span class="mr-2">Install MoveIt!</span><a href="#install-moveit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c"># Install MoveIt! (https://moveit.ros.org/install/source/):</span>
rosdep update
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install </span>python-catkin-tools clang-format-3.9
<span class="nb">cd</span> ~/
<span class="nb">mkdir </span>ws_moveit
<span class="nb">cd </span>ws_moveit
wstool init src
wstool merge <span class="nt">-t</span> src https://raw.githubusercontent.com/ros-planning/moveit/master/moveit.rosinstall
wstool update <span class="nt">-t</span> src
rosdep <span class="nt">-y</span> <span class="nb">install</span> <span class="nt">--from-paths</span> src <span class="nt">--ignore-src</span> <span class="nt">--rosdistro</span> kinetic
catkin config <span class="nt">--extend</span> /opt/ros/kinetic <span class="nt">--cmake-args</span> <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Release
config <span class="nt">--blacklist</span> <span class="se">\</span>
    moveit_chomp_optimizer_adapter <span class="se">\</span>
    moveit_planners_chomp <span class="se">\</span>
    chomp_motion_planner
catkin build
<span class="nb">echo</span> <span class="s2">"source ~/ws_moveit/devel/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
</pre></table></code></div></div><p>This installation is taken directly from the link in the code. You’ll notice that I don’t setup <code class="language-plaintext highlighter-rouge">ccache</code> and I add <code class="language-plaintext highlighter-rouge">chomp</code> to the blacklist but other than that this is pretty much just as it is in the MoveIt! tutorial.</p><h4 id="setup-ompl"><span class="mr-2">Setup OMPL</span><a href="#setup-ompl" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c"># Install OMPL (http://ompl.kavrakilab.org/installation.html):</span>
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install </span>pkg-config libboost-serialization-dev libboost-filesystem-dev libboost-system-dev libboost-program-options-dev libboost-test-dev libode-dev
<span class="nb">cd</span> ~/ws_moveit/src
git clone https://github.com/cairo-robotics/ompl.git
<span class="nb">cd </span>ompl
git checkout tags/1.2.3
</pre></table></code></div></div><p>This section simply installs a bunch of needed packages for OMPL and clones the source code into our MoveIt! workspace. Note that this clones the CAIRO fork of OMPL. This isn’t necessary unless you’re going using my technique for creating custom cost functions in OMPL spelled out in more detail here. It also makes sure to checkout tag <code class="language-plaintext highlighter-rouge">1.2.3</code> as this is the OMPL version for ROS Kinetic.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># Make some changes to build files so OMPL will be found by MoveIt!</span>
<span class="nb">cd</span> ~/ws_moveit
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|DESTINATION </span><span class="se">\$</span><span class="s2">{CMAKE_INSTALL_LIBDIR}|DESTINATION /opt/ros/kinetic/lib/x86_64-linux-gnu |g"</span> ./src/ompl/src/ompl/CMakeLists.txt
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|</span><span class="se">\$</span><span class="s2">{catkin_INCLUDE_DIRS}|</span><span class="se">\$</span><span class="s2">{OMPL_INCLUDE_DIRS} |g"</span> ./src/moveit/moveit_planners/ompl/CMakeLists.txt
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|</span><span class="se">\$</span><span class="s2">{OMPL_INCLUDE_DIRS})|</span><span class="se">\$</span><span class="s2">{catkin_INCLUDE_DIRS}) |g"</span> ./src/moveit/moveit_planners/ompl/CMakeLists.txt
<span class="c"># MoveIt! needs the package.xml file in order to locate OMPL for building</span>
<span class="nb">cd</span> ~/ws_moveit/src/ompl
wget https://raw.githubusercontent.com/ros-gbp/ompl-release/debian/kinetic/xenial/ompl/package.xml
</pre></table></code></div></div><p>In order for everything to build properly, we need to edit a couple files in the workspace. The first one tells OMPL to install itself over the default OMPL that is installed with MoveIt! (<a href="https://answers.ros.org/question/296238/custom-state-sampler-in-moveit/">source</a>). The second one tells MoveIt! to look for OMPL before catkin directories (<a href="https://moveit.ros.org/install/source/dependencies/">source</a>). And finally we have to download the <code class="language-plaintext highlighter-rouge">package.xml</code> into the OMPL directory so that MoveIt! will include it in the build process (<a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://moveit.ros.org/install/source/dependencies/" target="_blank">source</a>).</p><h4 id="install-ompl"><span class="mr-2">Install OMPL</span><a href="#install-ompl" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Finally install MoveIt! with our source OMPL</span>
<span class="nb">cd</span> ~/ws_moveit
<span class="nb">sudo </span>catkin clean <span class="nt">-y</span>
<span class="nb">sudo </span>catkin build <span class="c"># sudo is needed since we install OMPL in /opt</span>
<span class="nb">source</span> ~/.bashrc
</pre></table></code></div></div><p>Finally the real reason that we’re here! At first I thought you had to install OMPL according to the instruction on <a href="https://ompl.kavrakilab.org/">their site</a>. But it turns out that you can install it alongside MoveIt! and it “just works”. First we clean the workspace and then we build it. I added in a re-sourcing of the <code class="language-plaintext highlighter-rouge">.bashrc</code> file just for good measure.</p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>So there it is. It took me weeks to finally figure out this particular solution and I’m posting it here to hopefully save some others the time and hassle I went through. Again I want to reiterate that this is simply a functional solution and definitely not optimal. If anyone reads this and has suggestions on how to slim this down or decrease compile time (I’m considering packaging this up as a Docker image on Docker Hub so that install faster) I’d welcome any and all feedback. Please leave them in the comments below.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/development/'>development</a>, <a href='/categories/tutorial/'>tutorial</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ros/" class="post-tag no-text-decoration" >ros</a> <a href="/tags/moveit/" class="post-tag no-text-decoration" >moveit</a> <a href="/tags/motion-planning/" class="post-tag no-text-decoration" >motion planning</a> <a href="/tags/robotics/" class="post-tag no-text-decoration" >robotics</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Installing OMPL/MoveIt! for custom motion planning - Jack Kawell&amp;url=https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Installing OMPL/MoveIt! for custom motion planning - Jack Kawell&amp;u=https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/&amp;text=Installing OMPL/MoveIt! for custom motion planning - Jack Kawell" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://jack.kawell.us/posts/ompl-moveit-custom-motion-planning/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/sff-development-gaming-pc/">Building a Custom SFF Development and Gaming PC</a><li><a href="/posts/ompl-moveit-custom-motion-planning/">Installing OMPL/MoveIt! for custom motion planning</a><li><a href="/posts/ros-windows-wsl/">Setting up ROS in Windows through WSL</a><li><a href="/posts/ros-windows-docker/">Setting up ROS in Windows through Docker</a><li><a href="/posts/ompl-cost-functions/">Custom Cost Function for OMPL & MoveIt! through ROS</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/robotics/">robotics</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/wsl/">wsl</a> <a class="post-tag" href="/tags/cmd/">cmd</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/diy/">diy</a> <a class="post-tag" href="/tags/hobby/">hobby</a> <a class="post-tag" href="/tags/motion-planning/">motion planning</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ros-windows-wsl/"><div class="card-body"> <em class="timeago small" data-ts="1561395600" > 2019-06-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Setting up ROS in Windows through WSL</h3><div class="text-muted small"><p> UPDATE This post is now deprecated with the public launch of WSL2. I have a new post documenting how to do this same set up with WSL2. Check it out over here. NOTE: If you are not running Windows...</p></div></div></a></div><div class="card"> <a href="/posts/ros-windows-docker/"><div class="card-body"> <em class="timeago small" data-ts="1568221200" > 2019-09-11 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Setting up ROS in Windows through Docker</h3><div class="text-muted small"><p> In another post, I wrote about setting up a ROS development environment within Windows using WSL. Since then, I’ve had a few people ask me about setting up the same system except using Docker. This...</p></div></div></a></div><div class="card"> <a href="/posts/realsense-sdk-odroid/"><div class="card-body"> <em class="timeago small" data-ts="1569862800" > 2019-09-30 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing RealSense SDK on an ODROID-XU4</h3><div class="text-muted small"><p> In this post I’ll walk through how to get the RealSense SDK up and running on the ODROID-XU4. This might seem trivial at first, but the steps can be a bit confusing. For this tutorial I’ll assume ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <a href="/posts/ros-windows-wsl/" class="btn btn-outline-primary" prompt="Newer"><p>Setting up ROS in Windows through WSL</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "jgkawell/jgkawell.github.io", "data-repo-id": "R_kgDOHaXBOw", "data-category": "General", "data-category-id": "DIC_kwDOHaXBO84CPWL5", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/jgkawell">Jack Kawell</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/robotics/">robotics</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/wsl/">wsl</a> <a class="post-tag" href="/tags/cmd/">cmd</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/diy/">diy</a> <a class="post-tag" href="/tags/hobby/">hobby</a> <a class="post-tag" href="/tags/motion-planning/">motion planning</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
