<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Setting up ROS in Windows through WSL2" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://jack.kawell.us/posts/ros-windows-wsl2/" /><meta property="og:url" content="https://jack.kawell.us/posts/ros-windows-wsl2/" /><meta property="og:site_name" content="Jack Kawell" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-06-12T12:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Setting up ROS in Windows through WSL2" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-19T13:52:03-05:00","datePublished":"2020-06-12T12:00:00-05:00","description":"Introduction","headline":"Setting up ROS in Windows through WSL2","mainEntityOfPage":{"@type":"WebPage","@id":"https://jack.kawell.us/posts/ros-windows-wsl2/"},"url":"https://jack.kawell.us/posts/ros-windows-wsl2/"}</script><title>Setting up ROS in Windows through WSL2 | Jack Kawell</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jack Kawell"><meta name="application-name" content="Jack Kawell"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jack Kawell</a></div><div class="site-subtitle font-italic">I build stuff <a hidden rel="me" href="https://mastodon.world/@jgkawell">Mastodon</a></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-document ml-xl-3 mr-xl-3 unloaded"></i> <span>RESUME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jgkawell" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://mastodon.world/@jgkawell" aria-label="mastodon" target="_blank" rel="noopener"> <i class="fab fa-mastodon"></i> </a> <a href="https://www.linkedin.com/in/jack-kawell" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Setting up ROS in Windows through WSL2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Setting up ROS in Windows through WSL2</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/jgkawell">Jack Kawell</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1591981200" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-06-12 </em> </span> <span> Updated <em class="timeago" data-ts="1655664723" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-06-19 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1965 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="introduction">Introduction</h1><p>This post is a tutorial on how to set up a working ROS development environment within Windows (complete with GUI support) utilizing the new Windows Subsystem for Linux 2 (WSL2). I wrote <a href="/posts/ros-windows-wsl">a similar post</a> to this previously describing how to do it for WSL1 and a lot of that info carries over here. If you want to learn about why I choose to use WSL instead of a Virtual Machine (VM) or dual-booting into Linux, you can read about that in the above post.</p><p>Before we get started I’d like to point out that my <a href="/posts/ros-windows-wsl">previous post</a> on this topic for WSL1 has been a major hit. That blog post gets hundreds of views per week and I’m blown away by how many people have been helped by it. I want you all to know that I really appreciate all the feedback I get and that I actively check the comments on this blog so don’t be shy and reach out with comments and questions!</p><p>NOTE #1: If you’d like to know how to set this up in Docker, I have another tutorial <a href="/posts/ros-windows-docker">here</a> that shows how to do that.</p><p>NOTE #2: You have to be running Windows 10 version 2004 (Build 19041) or higher for WSL2 to work.</p><h1 id="wsl-installation">WSL Installation</h1><p>WSL2 is a complete reworking of WSL that shifts from what was essentially an emulation based approach to a virtualization based approach. WSL2 comes with a full Linux kernel and runs as a <em>very</em> lightweight VM on top of hypervisor. This gives tremendous improvements to performance over WSL1 specifically when it comes to boot times and I/O performance (we’re talking up to 20x speed improvements).</p><p>Installing and setting up WSL2 is pretty straightforward (you can see the full docs <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" target="_blank" rel="noreferrer noopener">here</a>). First, you need to enable the WSL optional feature in Windows so open up a PowerShell prompt as Administrator and run this command:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">dism.exe</span><span class="w"> </span><span class="nx">/online</span><span class="w"> </span><span class="nx">/enable-feature</span><span class="w"> </span><span class="nx">/featurename:Microsoft-Windows-Subsystem-Linux</span><span class="w"> </span><span class="nx">/all</span><span class="w"> </span><span class="nx">/norestart</span><span class="w">
</span></pre></table></code></div></div><p>If we were going to use WSL1 that is all we would have to do, but to use WSL2 there are a couple extra steps. You need to enable the Virtual Machine Platform optional feature by running the below command in PowerShell as Administrator:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">dism.exe</span><span class="w"> </span><span class="nx">/online</span><span class="w"> </span><span class="nx">/enable-feature</span><span class="w"> </span><span class="nx">/featurename:VirtualMachinePlatform</span><span class="w"> </span><span class="nx">/all</span><span class="w"> </span><span class="nx">/norestart</span><span class="w">
</span></pre></table></code></div></div><p><strong>You then need to restart your machine to finish the WSL install and the upgrade to WSL2.</strong></p><p>After the restart, we want to make sure that WSL2 is our default WSL version so that any Linux distros installed from here on out will be WSL2 (though you can always upgrade or downgrade distros later on). To set WSL2 as the default, run the below command in a PowerShell prompt:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">wsl</span><span class="w"> </span><span class="nt">--set-default-version</span><span class="w"> </span><span class="nx">2</span><span class="w">
</span></pre></table></code></div></div><p>After running this command, you may see this message: <code class="language-plaintext highlighter-rouge">WSL 2 requires an update to its kernel component. For information please visit https://aka.ms/wsl2kernel</code>. If you do, go to <a rel="noreferrer noopener" href="https://aka.ms/wsl2kernel" target="_blank">the link</a> in the message and update your Linux kernel by installing the MSI that you download from that site. Once the kernel is installed, run the above command again and verify that the message doesn’t appear.</p><p>If you already have a WSL1 installation, you can upgrade it to WSL2 using the below command and just replace <code class="language-plaintext highlighter-rouge">&lt;distribution name&gt;</code> with the name of the distro you want to upgrade:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">wsl</span><span class="w"> </span><span class="nt">--list</span><span class="w"> </span><span class="nt">--verbose</span><span class="w"> </span><span class="c">#list wsl distros</span><span class="w">
</span><span class="n">wsl</span><span class="w"> </span><span class="nt">--set-version</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">distribution</span><span class="w"> </span><span class="nx">name</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">2</span><span class="w"> </span><span class="c">#change a distro to WSL2</span><span class="w">
</span></pre></table></code></div></div><p>If you don’t already have Ubuntu installed through WSL1, let’s go ahead and install it now! Head over to the Microsoft Store app and search for “linux”.</p><figure> <img data-src="/assets/posts/linux-windows-store.png" alt="" class="wp-image-200" data-proofer-ignore><figcaption> <em>Click “Show all” to see all Linux distros</em></figcaption></figure><p>This will give you a bunch of options including Kali, Ubuntu, Debian, and others. For ROS we need Ubuntu installed and in this tutorial I will choose Ubuntu 18.04 LTS. Keep in mind that Ubuntu and ROS versions are paired with each other: e.g. 16.04/Kinetic and 18.04/Melodic. They don’t work interchangeably. So in this walkthrough I will install Ubuntu 18.04 and then later we’ll install ROS Melodic.</p><p>All that being said, simply click on your Ubuntu version of choice and then click install. This might take a bit depending on your internet speeds since the distribution is fairly large.</p><p>Now we can launch that app and it will take a bit the first time as it needs to run through the initialization of the OS (remember that we are installing a complete operating system here). However, every other boot of WSL will only take a couple of seconds.</p><p>Now you’re in! You have an (almost) fully-featured version of Ubuntu running within Windows with minimal resources being taken up and the ability to launch and kill it in a matter of seconds.</p><p>NOTE: Your WSL2 filesystem resides within your file explorer at <code class="language-plaintext highlighter-rouge">\\wsl$\Ubuntu-18.04</code></p><h2 id="setting-up-gui-forwarding"><span class="mr-2">Setting up GUI forwarding</span><a href="#setting-up-gui-forwarding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>There are many X-server applications that will allow for GUI forwarding from WSL2, but my favorite one is VcXsrv. Go <a rel="noreferrer noopener" href="https://sourceforge.net/projects/vcxsrv/" target="_blank">here</a> to download and install it.</p><p>Once you run the installer you can launch it from the Start menu in order to set it up. You can choose the defaults for the display settings and how to start clients. For the extra settings make sure to <strong>uncheck</strong> “Native opengl” and to <strong>check</strong> “Disable access control”. Right before you click “finish” you can select “Save configuration” so that you can simply double-click the config file to launch VcXsrv with these custom settings. This is a bit faster than clicking through every time.</p><figure> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 579 454'%3E%3C/svg%3E" data-src="/assets/posts/vcxsrv-settings.png" alt="" class="wp-image-209" width="579" height="454" data-proofer-ignore><figcaption> <em>Example of adjusted VcXsrv settings</em></figcaption></figure><p>Once you click “finish” you should see the VcXsrv icon down in your icon tray which means the server is running.</p><p>NOTE: Some people have said that they run into issues with OpenGL applications like Rviz. If you do, try setting the environment variable <code class="language-plaintext highlighter-rouge">LIBGL_ALWAYS_INDIRECT=0</code> in your WSL2 terminal (you can just add <code class="language-plaintext highlighter-rouge">export LIBGL_ALWAYS_INDIRECT=0</code> to the end of your <code class="language-plaintext highlighter-rouge">.bashrc</code> file).</p><p>Once that’s set up, we need to set the <code class="language-plaintext highlighter-rouge">DISPLAY</code> environment variable which tells WSL2 where to send the graphics for any application that needs a display to function. To do this, you’ll need to know the IP address for the Windows host machine. You can find this by going to <code class="language-plaintext highlighter-rouge">Settings -&gt; Network &amp;amp; Internet</code> and looking under the properties of your current connection (it will probably be labeled as “IPv4 Address”). Then run this command and replace <code class="language-plaintext highlighter-rouge">{your_ip_address}</code> with your IP address:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s1">'export DISPLAY={your_ip_address}:0.0'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
</pre></table></code></div></div><p>NOTE #1: If you’re running this on a laptop then your IP address will change as you move from network to network. Also, if you’re on a larger network (at a school campus or big company) you’re IP may change from time to time. Just keep in mind that you may need to update this IP address every once in a while.</p><p>NOTE #2: You may have some issue using the IP address shown in Windows settings. If you do you may have success using the method on <a href="https://superuser.com/questions/1476086/error-cant-open-display-0" target="_blank" rel="noreferrer noopener">this StackOverflow answer</a>. (credit to Ane for pointing this out)</p><p>Now source your edited <code class="language-plaintext highlighter-rouge">.bashrc</code> file:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">source</span> ~/.bashrc
</pre></table></code></div></div><p>Now everything should be setup for GUI apps to be sent on to Windows for rendering and display. If you want to test the setup, you can install some basic apps within Ubuntu with the below package:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>x11-apps
</pre></table></code></div></div><p>And then run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>xcalc
</pre></table></code></div></div><p>To run one of the apps. You can also install any of your favorite GUI apps or test it with ROS after we install that. Speaking of which…</p><h1 id="ros-installation">ROS Installation</h1><p>Now to install ROS. The ROS team has a great installation guide over <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="http://www.ros.org/install/" target="_blank">here</a> for the different ROS versions on different OSes but here we’re just going to do the steps for Ubuntu 18.04/ROS Melodic. Go <a rel="noreferrer noopener" aria-label="here (opens in a new tab)" href="http://wiki.ros.org/melodic/Installation/Ubuntu" target="_blank">here</a> for more details.</p><p>First, make sure your version of Ubuntu has all the latest updates (all the commands below should be run from the shell within the Ubuntu app or from the same shell but in <a href="https://www.microsoft.com/store/productId/9N0DX20HK701" target="_blank" rel="noreferrer noopener">the Windows Terminal</a>):</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt upgrade
</pre></table></code></div></div><p>Then we need to add the ROS package information to the sources list on our WSL system. To do this, run the below command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'</span>
</pre></table></code></div></div><p>Now we need to setup the keys for these package repositories:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-key adv <span class="nt">--keyserver</span> <span class="s1">'hkp://keyserver.ubuntu.com:80'</span> <span class="nt">--recv-key</span> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
</pre></table></code></div></div><p>NOTE: If you get some errors with the above command try substituting <code class="language-plaintext highlighter-rouge">hkp://pgp.mit.edu:80</code>.</p><p>Now we need to update the local list of available packages with these newly added ROS ones:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
</pre></table></code></div></div><p>Now we’re (finally) ready to install ROS. There’s a few options to choose from:</p><ul><li><code class="language-plaintext highlighter-rouge">desktop-full</code>: This includes everything; rqt, rviz, simulators, navigation, perception, you name it.<li><code class="language-plaintext highlighter-rouge">desktop</code>: This has most of the above but lacks the simulators, navigators, and perception.<li><code class="language-plaintext highlighter-rouge">ros-base</code>: This is just the basics for getting up and running with ROS. No GUI tools and only what you need to package, build, and communicate over the ROS stack.</ul><p>My recommendation is to go with <code class="language-plaintext highlighter-rouge">desktop-full</code> unless you are super short on storage. It’ll take a bit more time for the initial install and take up more disk space, but you’re guaranteed to have most of the tools you need for anything you’d like to do. However, with all of these you can simply add more tools as you need them. Simply run <code class="language-plaintext highlighter-rouge">apt-cache search ros-melodic</code> to find which ones are available.</p><p>Once you’ve chosen the ROS installation you want to get, run the below command and substitute in your choice. I’ll do <code class="language-plaintext highlighter-rouge">desktop-full</code> here:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>ros-melodic-desktop-full
</pre></table></code></div></div><p>Depending on your network speed, this might take a while to install.</p><p>ROS needs to be sourced each time you open a bash shell and so we can add it to the <code class="language-plaintext highlighter-rouge">~/.bashrc</code> file using the below commands to add it to the file and then source the file (you can manually source ROS every time but that defeats the point of making this a dedicated ROS development environment):</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"source /opt/ros/melodic/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</pre></table></code></div></div><p>A couple last things to do. For most ROS development you’ll want to be able to build your own packages. So we need a couple more packages in order to make this work. Install them with the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>python-rosdep python-rosinstall python-rosinstall-generator python-wstool build-essential
</pre></table></code></div></div><p>We also need to initialize the dependency manager for ROS. Simply run these three commands:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>python-rosdep
<span class="nb">sudo </span>rosdep init
rosdep update
</pre></table></code></div></div><p>And now let’s test the whole setup by trying to launch Rviz:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>roscore &amp;amp<span class="p">;</span> rosrun rviz rviz
</pre></table></code></div></div><p>If it worked you should now see a window like the one below:</p><figure> <img data-src="/assets/posts/rviz-3d-window-example.png" alt="" class="wp-image-383" data-proofer-ignore><figcaption> <em>Example of Rviz running in Windows through WSL2</em></figcaption></figure><p>And you’re done! Welcome to ROS on Windows!</p><h1 id="conclusion">Conclusion</h1><p>Though this post is pretty long, none of this is actually too hard to setup and can be done in a matter of a few minutes (not including install times). It offers a painless way to get started in ROS development on Windows for those who don’t want to run a VM or dual-boot their systems.</p><p>Once everything has been done above, you’re ready for some ROS development. Not everything will be supported in ROS with this setup (GPU support <a rel="noreferrer noopener" href="https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/" target="_blank">is coming</a> in the future), but the basics are all there for most development needs. If you’re new to ROS, I’d suggest walking through the tutorials <a rel="noreferrer noopener" aria-label="here (opens in a new tab)" href="http://wiki.ros.org/ROS/Tutorials" target="_blank">here</a> to get a handle on things. At least go through the Beginner Level (you can just do one or the other of the C++ and Python ones) so that you have a good foundation to work off of.</p><p>I hope this is helpful to somebody and if you have any thoughts on how to improve this tutorial don’t hesitate to let me know with a comment.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/development/'>development</a>, <a href='/categories/tutorial/'>tutorial</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/windows/" class="post-tag no-text-decoration" >windows</a> <a href="/tags/wsl/" class="post-tag no-text-decoration" >wsl</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Setting up ROS in Windows through WSL2 - Jack Kawell&amp;url=https://jack.kawell.us/posts/ros-windows-wsl2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Setting up ROS in Windows through WSL2 - Jack Kawell&amp;u=https://jack.kawell.us/posts/ros-windows-wsl2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://jack.kawell.us/posts/ros-windows-wsl2/&amp;text=Setting up ROS in Windows through WSL2 - Jack Kawell" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://jack.kawell.us/posts/ros-windows-wsl2/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/sff-development-gaming-pc/">Building a Custom SFF Development and Gaming PC</a><li><a href="/posts/ompl-moveit-custom-motion-planning/">Installing OMPL/MoveIt! for custom motion planning</a><li><a href="/posts/ros-windows-wsl/">Setting up ROS in Windows through WSL</a><li><a href="/posts/ros-windows-docker/">Setting up ROS in Windows through Docker</a><li><a href="/posts/ompl-cost-functions/">Custom Cost Function for OMPL & MoveIt! through ROS</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/robotics/">robotics</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/wsl/">wsl</a> <a class="post-tag" href="/tags/cmd/">cmd</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/diy/">diy</a> <a class="post-tag" href="/tags/hobby/">hobby</a> <a class="post-tag" href="/tags/motion-planning/">motion planning</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/powerline-wsl-vs-code/"><div class="card-body"> <em class="timeago small" data-ts="1572886800" > 2019-11-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Setting up Powerline in WSL and VS Code</h3><div class="text-muted small"><p> As you can probably tell from my previous posts, I spend a lot of time developing in WSL. In addition to this, I use VS Code as my main text editor/IDE and love it. It’s such a great editor with a ...</p></div></div></a></div><div class="card"> <a href="/posts/cmd-powershell-bashrc/"><div class="card-body"> <em class="timeago small" data-ts="1584550800" > 2020-03-18 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Create .bashrc files for Command Prompt and PowerShell in Windows</h3><div class="text-muted small"><p> Create .bashrc files for Command Prompt and PowerShell in Windows As someone who uses Linux a lot as my development workflow I’ve gotten used to the great power and flexibility of .bashrc files. I...</p></div></div></a></div><div class="card"> <a href="/posts/ompl-moveit-custom-motion-planning/"><div class="card-body"> <em class="timeago small" data-ts="1561395600" > 2019-06-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing OMPL/MoveIt! for custom motion planning</h3><div class="text-muted small"><p> Introduction I am in the process of creating a customized version of an OMPL planner that uses a personalized costmap to help robots learn to move around people in a more comfortable way. In order...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/cmd-powershell-bashrc/" class="btn btn-outline-primary" prompt="Older"><p>Create .bashrc files for Command Prompt and PowerShell in Windows</p></a> <a href="/posts/sff-development-gaming-pc/" class="btn btn-outline-primary" prompt="Newer"><p>Building a Custom SFF Development and Gaming PC</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "jgkawell/jgkawell.github.io", "data-repo-id": "R_kgDOHaXBOw", "data-category": "General", "data-category-id": "DIC_kwDOHaXBO84CPWL5", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/jgkawell">Jack Kawell</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/robotics/">robotics</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/wsl/">wsl</a> <a class="post-tag" href="/tags/cmd/">cmd</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/diy/">diy</a> <a class="post-tag" href="/tags/hobby/">hobby</a> <a class="post-tag" href="/tags/motion-planning/">motion planning</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
